<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <title>Image cipher</title>
    <div class="container">
        <h2>Image cipher</h2>
        <p>
            This app encode your image to pure noise, 
            only person with the secret can decode it back. 
            The code runs entirely in your browser, 
            so your image and secret are always safe and private :)
        </p>
    </div>

    <div id="input-container" class="container">
        Select an image file and enter a secret to encode / decode.
        <div id="secret-container">
            <div id="drop-zone" style="display: none;">
                <p>Drag and drop an image file here.</p>
                <p>Supported formats: PNG, JPEG, BMP, ...</p>
            </div>

            <!-- https://gist.github.com/danawoodman/4788404bc620d5392d111dba98c73873 -->
            <input type="file" id="fileInput" accept="image/*;capture=camera" required>
            <br>
            <label for="secretInput">Secret:</label>
            <input id="secretInput" placeholder="Enter your secret here" autocomplete="off">

            <span style="margin-top: 0.25rem">
                <input type="checkbox" id="limitMaxSide" checked>
                <label for="limitMaxSide">Limit max side to </label>
                <input type="number" id="maxSide" value="1024" min="1" max="25565" step="1" style="width: 4em;">
                <label for="maxSide">px</label>
            </span>
        </div>

        <div id="button-container">
            <button id="encodeButton">Encode</button>
            <button id="decodeButton">Decode</button>
            as 
            <div style="display: flex">
                <select id="imTypeSelect">
                    <option value="png">PNG</option>
                    <option value="jpeg">JPEG</option>
                </select> âœ¨
            </div>
        </div>
    </div>

    <div id="output-container" class="container" style="opacity: 0;">
        <div id="error"></div>
        <div id="inputImg"></div>
        <div id="output"></div>
        <label id="hint"></label>
        <div id="downloadBtn-container" style="display: none">
            <button id="downloadBtn">Download Image</button>
        </div>
    </div>

    <footer id="footer">
        <p style="text-align: center; font-size: 0.8rem;">
            The source code is available at 
            <a href="https://github.com/MenxLi/im-cipher">menxli/im-cipher</a>.
        </p>
    </footer>

</body>

<script src="./script.js" type="module"></script>
</html>